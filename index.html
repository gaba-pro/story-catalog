<!DOCTYPE html>
<html lang="id">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Aplikasi katalog cerita digital dengan peta interaktif untuk berbagi dan menjelajahi cerita dari berbagai lokasi">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#2196F3">
    <meta name="msapplication-TileColor" content="#2196F3">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Story Catalog">
    
    <!-- Icons -->
    <link rel="icon" type="image/svg+xml" href="/story-catalog-pwa/assets/favicon-D_hcRnF_.svg" />
    <link rel="apple-touch-icon" href="/story-catalog-pwa/assets/favicon-D_hcRnF_.svg" />
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="/story-catalog-pwa/manifest.json" crossorigin="use-credentials" />
    
    <title>Story Catalog - Aplikasi Katalog Cerita Digital</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- View Transitions API Support -->
    <meta name="view-transition" content="same-origin" />
    
    <!-- Preload critical resources -->
    <link rel="preload" href="/story-catalog-pwa/assets/index-BOMuimMp.js" as="script">
    
    
    <style>
      /* Basic offline styles */
      .offline-notification {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: #ff9800;
        color: white;
        text-align: center;
        padding: 10px;
        z-index: 10000;
      }
      
      .loading-indicator {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        z-index: 9999;
      }
      
      .spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #2196F3;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 2s linear infinite;
        margin: 0 auto 10px;
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      
      .skip-to-content {
        position: absolute;
        top: -40px;
        left: 6px;
        background: #2196F3;
        color: white;
        padding: 8px;
        text-decoration: none;
        z-index: 10001;
        transition: top 0.3s;
      }
      
      .skip-to-content:focus {
        top: 6px;
      }
      
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }
    </style>
    <script type="module" crossorigin src="/story-catalog-pwa/assets/main--YmE99qm.js"></script>
    <link rel="stylesheet" crossorigin href="/story-catalog-pwa/assets/main-DgLyJshn.css">
  </head>
  <body>
    <!-- Offline Notification -->
    <div id="offline-notification" class="offline-notification" aria-live="polite">
      ‚ö†Ô∏è Anda sedang offline. Beberapa fitur mungkin tidak tersedia.
    </div>
    
    <!-- Skip to content link for accessibility -->
    <a href="#main-content" class="skip-to-content" aria-label="Lewati ke konten utama">
      Lewati ke konten utama
    </a>
    
    <!-- Loading indicator -->
    <div id="loading-indicator" class="loading-indicator" aria-hidden="true">
      <div class="spinner"></div>
      <span>Memuat aplikasi...</span>
    </div>

    <header role="banner">
      <div class="main-header container">
        <a class="brand-name" href="#/" aria-label="Story Catalog - Halaman beranda">
          <span class="brand-text">Story Catalog</span>
        </a>

        <nav id="navigation-drawer" class="navigation-drawer" role="navigation" aria-label="Menu navigasi utama">
          <ul id="nav-list" class="nav-list" role="menubar">
            <li role="none"><a href="#/" role="menuitem" tabindex="0">üè† Beranda</a></li>
            <li role="none"><a href="#/stories" role="menuitem" tabindex="0">üìö Cerita</a></li>
            <li role="none"><a href="#/favorites" role="menuitem" tabindex="0">‚ù§Ô∏è Favorit</a></li>
            <li role="none"><a href="#/add-story" role="menuitem" tabindex="0">‚ûï Tambah Cerita</a></li>
            <li role="none"><a href="#/login" role="menuitem" tabindex="0">üîê Masuk</a></li>
            <li role="none"><a href="#/register" role="menuitem" tabindex="0">üìù Daftar</a></li>
            <li role="none"><a href="#/about" role="menuitem" tabindex="0">‚ÑπÔ∏è Tentang</a></li>
          </ul>
        </nav>

        <button id="drawer-button" class="drawer-button" aria-label="Buka menu navigasi" aria-expanded="false">
          <span class="hamburger-icon"></span>
          <span class="sr-only">Menu</span>
        </button>
      </div>
    </header>

    <main id="main-content" class="main-content" role="main" tabindex="-1">
      <!-- Fallback content during initialization -->
      <div id="initialization-status" style="padding: 2rem; text-align: center; background: #f0f0f0; margin: 1rem; border-radius: 8px;">
        <p>üîÑ Inisialisasi aplikasi...</p>
        <p><small>Jika halaman tidak muncul dalam beberapa detik, silakan refresh halaman.</small></p>
      </div>
    </main>
    
    <footer role="contentinfo" class="main-footer">
      <div class="container">
        <p>&copy; 2024 Story Catalog. Aplikasi katalog cerita digital.</p>
      </div>
    </footer>

    <script>
      // Online/Offline detection
      window.addEventListener('online', () => {
        const notification = document.getElementById('offline-notification');
        if (notification) {
          notification.style.display = 'none';
        }
        console.log('Online');
      });

      window.addEventListener('offline', () => {
        const notification = document.getElementById('offline-notification');
        if (notification) {
          notification.style.display = 'block';
        }
        console.log('Offline');
      });

      // Initial check
      if (!navigator.onLine) {
        window.dispatchEvent(new Event('offline'));
      }
    </script>
  </body>
</html>